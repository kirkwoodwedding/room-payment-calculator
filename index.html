<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Room Payment Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Poppins', sans-serif;
  }
  .background-container {
    position: fixed; top: 0; left: 0;
    width: 100%; height: 100%; z-index: -1;
    overflow: hidden;
  }
  .bg-map {
    width: 100%; height: 100%; object-fit: cover; opacity: 1;
  }
  .content-container {
    max-width: 500px;
    margin: 40px auto;
    background: rgba(162, 178, 159, 0.6);
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    min-height: 100vh;
    position: relative;
    z-index: 1;
    line-height: 1.5;
    color: #333;
  }
  label, select, button {
    font-family: 'Poppins', sans-serif;
  }
  select, button {
    width: 100%;
    margin-bottom: 15px;
    padding: 10px;
    font-size: 1rem;
    border-radius: 5px;
    border: 1px solid #ccc;
    box-sizing: border-box;
  }
  button {
    background-color: #5d7263;
    color: white;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background-color: #4a5d50;
  }
  .result {
    font-weight: bold;
    margin-top: 10px;
    font-size: 1.2rem;
  }
  .booking-section {
    background-color: rgba(255,255,255,0.75);
    margin-top: 40px;
    padding: 20px;
    border-radius: 8px;
    font-size: 0.95rem;
  }
  .booking-section h2 {
    margin-top: 0;
  }
  .booking-section a {
    color: #4a5d50;
    font-weight: bold;
    text-decoration: none;
  }
  .booking-section a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>
  <div class="background-container">
    <img src="https://kirkwoodwedding.github.io/room-payment-calculator/watercolor2.JPG" alt="Background" class="bg-map" />
  </div>

  <div class="content-container">
    <h1>Room Payment Calculator</h1>

    <label for="roomType">Select Room Type:</label>
    <select id="roomType">
      <option value="" disabled selected>Select room</option>
      <option value="juniorSuite">Junior Suite</option>
      <option value="juniorSuiteOceanView">Junior Suite Ocean View</option>
      <option value="inspiraSwimOut">INSPIRA Swim Out</option>
      <option value="inspiraTerrace">Inspira Terrace</option>
    </select>

    <label for="occupancy">Number of Guests in Room:</label>
    <select id="occupancy">
      <option value="" disabled selected>Select occupancy</option>
      <option value="single">Single</option>
      <option value="double">Double</option>
      <option value="triple">Triple</option>
    </select>

    <label for="nights">Number of Nights:</label>
    <select id="nights">
      <option value="" disabled selected>Select nights</option>
      <option value="3">3 Nights</option>
      <option value="4">4 Nights</option>
      <option value="5">5 Nights</option>
    </select>

    <button id="calculateBtn">Calculate Payment</button>

    <div class="result" id="result"></div>

    <div id="calendarTools" style="margin-top: 20px;">
      <label for="calendarEventSelect">Add a Calendar Reminder:</label>
      <select id="calendarEventSelect" style="margin-bottom: 10px;">
        <option value="" disabled selected>Select an event</option>
        <option value="secondPayment">2nd Payment - Due Dec 11, 2025</option>
        <option value="finalPayment">Final Payment - Due Mar 10, 2026</option>
        <option value="travelDates">Travel Dates - Starting July 14, 2026</option>
      </select>
      <button id="downloadICSBtn">Add to Apple Calendar (.ics)</button>
      <button id="googleCalBtn">Add to Google Calendar</button>
    </div>

    <div class="booking-section">
      <h2>Booking and Payment Information</h2>
      <ul>
        <li><strong>Deposit:</strong> $400 â€” Due <strong>as soon as you're ready to book</strong></li>
        <li><strong>2nd Payment (50% minus deposit):</strong> Due <strong>December 11, 2025</strong></li>
        <li><strong>Final Payment (remaining 50%):</strong> Due <strong>March 10, 2026</strong></li>
      </ul>
      <p><strong>Contact:</strong> <a href="mailto:Linda@blissfulhoneymoons.com">Linda@blissfulhoneymoons.com</a><br />
      ðŸ“ž <a href="tel:6207981120">620-798-1120</a></p>
      <p>Or book here: <a href="https://www.vacationcrm.com/IFrameRegistration?lookup_id=95f1f7de-6844-4e22-8db0-e0c4fa33c39d" target="_blank">Make a payment</a></p>
    </div>
  </div>

<script>
  const prices = {
    juniorSuite: {
      single: {3: 1654.99, 4: 2192.65, 5: 2730.31},
      double: {3: 1981.40, 4: 2613.88, 5: 3246.34},
      triple: {3: 2974.05, 4: 3923.40, 5: 4872.75}
    },
    juniorSuiteOceanView: {
      single: {3: 1717.32, 4: 2275.77, 5: 2834.21},
      double: {3: 2051.54, 4: 2707.38, 5: 3363.22},
      triple: {3: 3079.26, 4: 4063.65, 5: 5048.07}
    },
    inspiraSwimOut: {
      single: {3: 3139.40, 4: 4171.87, 5: 5204.34},
      double: {3: 3181.40, 4: 4213.88, 5: 5246.34},
      triple: {3: 4770.15, 4: 6318.21, 5: 7866.27}
    },
    inspiraTerrace: {
      single: {3: 3139.40, 4: 4171.87, 5: 5204.34},
      double: {3: 3181.40, 4: 4213.88, 5: 5246.34},
      triple: {3: 4770.15, 4: 6318.21, 5: 7866.27}
    }
  };

  const deposit = 400;
  const firstDueDateStr = 'December 11, 2025';
  const secondDueDateStr = 'March 10, 2026';

  const roomTypeSelect = document.getElementById('roomType');
  const occupancySelect = document.getElementById('occupancy');
  const nightsSelect = document.getElementById('nights');
  const calculateBtn = document.getElementById('calculateBtn');
  const resultDiv = document.getElementById('result');
  const calendarEventSelect = document.getElementById('calendarEventSelect');
  const downloadICSBtn = document.getElementById('downloadICSBtn');
  const googleCalBtn = document.getElementById('googleCalBtn');

  function formatCurrency(num) {
    return '$' + num.toFixed(2);
  }

  function generatePaymentPlan(room, occ, nights) {
    const totalPrice = prices[room][occ][nights];
    const halfPrice = totalPrice / 2;
    return {
      total: totalPrice,
      deposit,
      firstPayment: halfPrice - deposit,
      firstDue: new Date(firstDueDateStr),
      finalPayment: halfPrice,
      finalDue: new Date(secondDueDateStr)
    };
  }

  function displayResult(plan) {
    resultDiv.innerHTML = `
      Total Room Price: ${formatCurrency(plan.total)}<br>
      Deposit Due Now: ${formatCurrency(plan.deposit)}<br>
      2nd Payment Due ${plan.firstDue.toLocaleDateString(undefined, {month: 'long', day: 'numeric', year: 'numeric'})}: ${formatCurrency(plan.firstPayment)}<br>
      Final Payment Due ${plan.finalDue.toLocaleDateString(undefined, {month: 'long', day: 'numeric', year: 'numeric'})}: ${formatCurrency(plan.finalPayment)}
    `;
  }

  calculateBtn.addEventListener('click', () => {
    const room = roomTypeSelect.value;
    const occ = occupancySelect.value;
    const nights = parseInt(nightsSelect.value);

    if (!room || !occ || !nights) {
      resultDiv.textContent = 'Please select all options.';
      return;
    }

    const plan = generatePaymentPlan(room, occ, nights);
    displayResult(plan);
  });

  // Create calendar event helpers

  function formatDateICS(date) {
    // Format date as YYYYMMDD
    return date.toISOString().slice(0,10).replace(/-/g,"");
  }

  function formatDateTimeICS(date) {
    // Format date with time for ICS YYYYMMDDTHHmmssZ (UTC)
    return date.toISOString().replace(/[-:]/g,"").split('.')[0] + "Z";
  }

  function createICS(event) {
    const {title, description, startDate, endDate} = event;

    const dtStart = formatDateICS(startDate);
    // ICS all-day event endDate is day after actual end
    const dtEnd = formatDateICS(new Date(endDate.getTime() + 24*60*60*1000));

    return `BEGIN:VCALENDAR
VERSION:2.0
CALSCALE:GREGORIAN
BEGIN:VEVENT
SUMMARY:${title}
DESCRIPTION:${description}
DTSTART;VALUE=DATE:${dtStart}
DTEND;VALUE=DATE:${dtEnd}
END:VEVENT
END:VCALENDAR`;
  }

  function downloadICS(event) {
    const icsContent = createICS(event);
    const blob = new Blob([icsContent], {type: 'text/calendar'});
    const url = URL.createObjectURL(blob);

    const link
    const link = document.createElement('a');
    link.href = url;
    link.download = `${event.title.replace(/\s+/g, '_')}.ics`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
  }

  function openGoogleCalendar(event) {
    const {title, description, startDate, endDate} = event;
    const formatDateTimeGoogle = (date) => {
      return date.toISOString().replace(/-|:|\.\d\d\d/g, '');
    };

    const start = formatDateTimeGoogle(startDate);
    const end = formatDateTimeGoogle(endDate);

    const url = `https://calendar.google.com/calendar/r/eventedit?text=${encodeURIComponent(title)}&details=${encodeURIComponent(description)}&dates=${start}/${end}`;
    window.open(url, '_blank');
  }

  downloadICSBtn.addEventListener('click', () => {
    const selectedEvent = calendarEventSelect.value;
    if (!selectedEvent) {
      alert('Please select an event first.');
      return;
    }
    let event;
    if (selectedEvent === 'secondPayment') {
      event = {
        title: '2nd Payment Due',
        description: 'Your second payment for the room is due.',
        startDate: new Date('2025-12-11'),
        endDate: new Date('2025-12-11')
      };
    } else if (selectedEvent === 'finalPayment') {
      event = {
        title: 'Final Payment Due',
        description: 'Your final payment for the room is due.',
        startDate: new Date('2026-03-10'),
        endDate: new Date('2026-03-10')
      };
    } else if (selectedEvent === 'travelDates') {
      event = {
        title: 'Travel Dates Start',
        description: 'Your travel to the destination starts today!',
        startDate: new Date('2026-07-14'),
        endDate: new Date('2026-07-14')
      };
    }
    downloadICS(event);
  });

  googleCalBtn.addEventListener('click', () => {
    const selectedEvent = calendarEventSelect.value;
    if (!selectedEvent) {
      alert('Please select an event first.');
      return;
    }
    let event;
    if (selectedEvent === 'secondPayment') {
      event = {
        title: '2nd Payment Due',
        description: 'Your second payment for the room is due.',
        startDate: new Date('2025-12-11T09:00:00Z'),
        endDate: new Date('2025-12-11T10:00:00Z')
      };
    } else if (selectedEvent === 'finalPayment') {
      event = {
        title: 'Final Payment Due',
        description: 'Your final payment for the room is due.',
        startDate: new Date('2026-03-10T09:00:00Z'),
        endDate: new Date('2026-03-10T10:00:00Z')
      };
    } else if (selectedEvent === 'travelDates') {
      event = {
        title: 'Travel Dates Start',
        description: 'Your travel to the destination starts today!',
        startDate: new Date('2026-07-14T09:00:00Z'),
        endDate: new Date('2026-07-14T10:00:00Z')
      };
    }
    openGoogleCalendar(event);
  });
</script>
</body>
</html>
